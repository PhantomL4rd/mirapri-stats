---
import type { VersatilityItem } from '../lib/queries';

interface Props {
  items: VersatilityItem[];
}

const { items } = Astro.props;

/**
 * Lodestone アイテムURL を生成
 */
function getLodestoneUrl(itemId: string): string {
  return `https://jp.finalfantasyxiv.com/lodestone/playguide/db/item/${itemId}/`;
}
---

<div class="space-y-2">
  {
    items.length === 0 ? (
      <p class="text-center text-gray-500 py-8">データがありません</p>
    ) : (
      <ol class="space-y-2">
        {items.map((item, index) => (
          <li class="flex items-center gap-3 rounded-lg border bg-white p-3 shadow-sm">
            <span class="flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-sm font-bold text-gray-600">
              {index + 1}
            </span>
            <div class="flex-1">
              <a
                href={getLodestoneUrl(item.itemId)}
                target="_blank"
                rel="noopener noreferrer"
                class="font-medium text-gray-900 hover:text-blue-600 hover:underline"
                data-eo-type="t"
              >
                {item.itemName}
              </a>
              <p class="text-sm text-gray-500">
                {item.versatilityScore}種類の装備と相性◎
              </p>
            </div>
          </li>
        ))}
      </ol>
    )
  }
</div>
